<div *ngIf="viewType">
  <div *ngIf="item" class="item">
    <mat-card>
      <div class="category">
        <mat-form-field class="full-width">
          <mat-select [(ngModel)]="item.categoryId">
            <mat-option
              *ngFor="let category of categories"
              [value]="category.id"
            >
              {{ category.name }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <div class="card">
        <mat-card>
          <div class="information">
            <mat-form-field class="full-width">
              <mat-label>Name</mat-label>
              <input matInput type="text" [(ngModel)]="item.name" />
            </mat-form-field>
            <mat-form-field class="full-width">
              <mat-label>Description</mat-label>
              <textarea
                matInput
                type="text"
                [(ngModel)]="item.description"
              ></textarea>
            </mat-form-field>
            <button mat-stroked-button>Setup languages</button>
          </div>
        </mat-card>
      </div>
      <div class="card">
        <mat-card>
          <mat-card-title>Details for 100 grams</mat-card-title>
          <div class="card">
            <mat-card>
              <div class="basic-values">
                <div>
                  <mat-form-field class="item-quantity">
                    <mat-label>Calories</mat-label>
                    <input
                      matInput
                      type="number"
                      [(ngModel)]="item.calories"
                    /> </mat-form-field
                  ><span> kcal</span>
                </div>
                <div>
                  <mat-form-field class="item-quantity">
                    <mat-label>Protein</mat-label>
                    <input
                      matInput
                      type="number"
                      [(ngModel)]="item.protein"
                    /> </mat-form-field
                  ><span> g</span>
                </div>
                <div>
                  <mat-form-field class="item-quantity">
                    <mat-label>Fat</mat-label>
                    <input
                      matInput
                      type="number"
                      [(ngModel)]="item.fatTotal"
                    /> </mat-form-field
                  ><span> g</span>
                </div>
                <div>
                  <mat-form-field class="item-quantity">
                    <mat-label>Carbs</mat-label>
                    <input
                      matInput
                      type="number"
                      [(ngModel)]="item.carbsTotal"
                    /> </mat-form-field
                  ><span> g</span>
                </div>
                <div>
                  <mat-form-field class="item-quantity">
                    <mat-label>Fiber</mat-label>
                    <input
                      matInput
                      type="number"
                      [(ngModel)]="item.fiber"
                    /> </mat-form-field
                  ><span> g</span>
                </div>
              </div>
            </mat-card>
          </div>
          <div class="nutrition">
            <aqn-item-detail-values
              [all]="valuesModel"
              [values]="item.values"
              (valuesChanged)="item.values = $event"
            ></aqn-item-detail-values>
          </div>
        </mat-card>
      </div>
      <div class="card">
        <mat-card>
          <mat-card-title>Detail</mat-card-title>
          <div class="card">
            <mat-card>
              <mat-slide-toggle [(ngModel)]="item.isQuantityAllowed"
                >is Piece Allowed</mat-slide-toggle
              >
              <div *ngIf="item.isQuantityAllowed">
                <mat-card>
                  <mat-card-title>Quantity Average Weights</mat-card-title>
                  <aqn-quantity-item-size
                    [items]="item.values.quantityAvgWeights"
                    [allItems]="valuesModel?.quantityAvgWeights"
                    (valueChanged)="item.values.quantityAvgWeights = $event"
                  ></aqn-quantity-item-size>
                </mat-card>
              </div>
            </mat-card>
          </div>
          <div class="card">
            <mat-card>
              <mat-slide-toggle [(ngModel)]="item.isVolumeAllowed"
                >is Volume Allowed</mat-slide-toggle
              >
              <div *ngIf="item.isVolumeAllowed">
                <mat-form-field class="item-quantity">
                  <mat-label>average density</mat-label>
                  <input
                    matInput
                    type="number"
                    [(ngModel)]="item.volumeAverageDensity"
                  /> </mat-form-field
                ><span> g/1000 cm^3</span>
              </div>
            </mat-card>
          </div>
        </mat-card>
      </div>
      <div class="card">
        <mat-card>
          <mat-card-title>Allergens</mat-card-title>
          <aqn-allergan
            [items]="item.values.allergens"
            [allItems]="valuesModel?.allergens"
            (valueChanged)="item.values.allergens = $event"
          ></aqn-allergan>
        </mat-card>
      </div>
      <div>
        <button mat-button (click)="cancel()">Cancel</button>
        <button
          mat-raised-button
          *ngIf="viewType !== ViewType.detail"
          (click)="save()"
        >
          Save
        </button>
      </div>
    </mat-card>
  </div>
</div>
